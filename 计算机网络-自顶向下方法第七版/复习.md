> 计算机网络自顶向下：

传输控制协议TCP：传输可靠、拥塞控制协议

UDP优势：
	无拥塞控制
	无连接
	无状态
	header首部字段少

比特出错因此需要检验分组的正确性
差错校验：	检验和	CRC： 生成多项式

ACK: positive acknowledgmentNAK: negative acknowledgment

自动重传请求
(Automatic Repeat reQuest, ARQ)协议：
分组重传发生情况：
	分组丢失	分组受损，校验出错	收到应答超时
    ![图](/计算机网络-自顶向下方法第七版/image/Pasted%20Graphic%201.png)


滑动窗口协议(sliding-window protocol)：流量控制、拥塞控制相关

累计确认：cumulative acknowledgment 表明接收方已正确接收到序号为n的以前包括n在内的所有分组。TCP可靠数据传输构件时遇到的所有技术。这些技术包括使用序号、累积确认、检验和以及超时/重传操作（差错检测、重传、累积确认、定时器以及用于序号和确认号的首部字段）



可靠数据传输机制及其用途的总结
检验和: 	
	用于检测在一个传输分组中的比特错误
定时器: 	
	用于超时/重传一个分组，可能因为该分组（或其AGK）在信道中丢失了。由于当一个分组延时但未丢失（过早超时），或当一个分组已被接收方收到但从接收方到发送方的ACK丢失时，可能产生超时事件，所以接收方可能会收到一个分组的多个冗余副本
序号: 	
	用于为从发送方流向接收方的数据分组按顺序编号。所接收分组的序号间的空隙可使接收方检测出丢失的分组。具有相同序号的分组可使接收方检测岀一个分组的冗余副本
确认: 	
	接收方用于告诉发送方一个分组或一组分组已被正确地接收到了。确认报文通常携带着被确认的分组或多个分组的序号。确认可以是逐个的或累积的，这取决于协议
否定确认:	
	接收方用于告诉发送方某个分组未被正确地接收。否定确认报文通常携带着未被正确接收的分组的序号\
窗口、流水线:
	发送方也许被限制仅发送那些序号落在一个指定范围内的分组。通过允许一次发送多个分组但未被确认，发送方的利用率可在停等操作模式的基础上得到增加。我们很快将会看到，窗口长度可根据接收方接收和缓存报文的能力、网络中的拥塞程度或两者情况来进行设置


把ACK应答和响应信息合并在同一个包的情况被称为捎带(piggybacked)，达到的效果就是节省单独发ACK包的流量。
客户中的TCP会用以下方式与服务器中的TCP建立一条TCP连接（3次握手 three-way handshake）:
1、客户端的TCP首先向服务器端的TCP发送一个特殊的TCP报文段。该报文段中不包含应用层数据。但是在报文段的首部（参见图3-29）中的一个标志位（即SYN比特）被置为1。因此，这个特殊报文段被称为SYN报文段。另外，客户会随机地选择一个初始序号（client_isn）,并将此编号放置于该起始的TCP SYN报文段的序号字段中。该报文段会被封装在一个IP数据报中，并发送给服务器。为了避免某些安全性攻击，在适当地随机化选择clientjsn方面有着不少有趣的研究 CERT 2001・09］。
 
2、一旦包含TCP SYN报文段的IP数据报到达服务器主机（假定它的确到达T!）,服务器会从该数据报中提取出TCP SYN报文段，为该TCP连接分配TCP缓存和变量，并向该客户TCP发送允许连接的报文段。（我们将在第8章看到，在完成三次握手的第三步之前分配这些缓存和变量，使得TCP易于受到称为SYN洪泛的拒绝服务攻击。）这个允许连接的报文段也不包含应用层数据。但是，在报文段的首部却包含3个重要的信息。首先，SYN比特被置为1。其次，该TCP报文段首部的确认号字段被置为client _ isn + I o最后，服务器选择自己的初始序号
（serverjsn）,并将其放置到TCP报文段首部的序号字段中。这个允许连接的报文段实际上表明了：“我收到了你发起建立连接的SYN分组，该分组带有初始序号clientjsno我同意建立该连接。我自己的初始序号是serverjsnon该允许连接的报文段被称为SYNACK报文段（SYNACK segment）。

3、在收到SYNACK报文段后，客户也要给该连接分配缓存和变量。客户主机则向服务器发送另外一个报文段；这最后一个报文段对服务器的允许连接的报文段进行了确认（该客户通过将值serverjsn + 1放置到TCP报文段首部的确认字段中来完成此项工作）。因为连接已经建立了，所以该SYN比特被置为0。该三次握手的第三个阶段可以在报文段负载中携带客户到服务器的数据。

![图](/计算机网络-自顶向下方法第七版/image/Pasted%20Graphic.png)
![图](/计算机网络-自顶向下方法第七版/image/客户应用程序发起.png)
![图](/计算机网络-自顶向下方法第七版/image/服务器应用程序创建.png)



拥塞控制方法分为端到端和网络辅助两种。
	•	端到端拥塞控制：在端到端拥塞控制方法中，网络层不提供显式的拥塞反馈。TCP 使用端到端方法，通过观察网络行为（如丢包和时延）来推断拥塞。TCP 将丢包视为拥塞迹象，并相应减小窗口长度。
	•	网络辅助的拥塞控制：在网络辅助的拥塞控制中，路由器向发送方提供关于网络拥塞状态的显式反馈信息。这种反馈可以简单地用一个比特来指示拥塞情况，也可以更复杂。例如，ATM ABR 拥塞控制中，路由器会通知发送方支持的最大发送速率。



IP地址：一个接口的IP地址的一部分需要由其连接的子网来决定。

我们先看一个组织是如何为其设备得到一个地址块的，然后再看一个设备（如一台
主机）是如何从某组织的地址块中分配到一个地址的。

网络的切换：从移动性角度看，DHCP确实有非常严重的缺陷。因为每当节点连到一个新子网，要从DHCP得到一个新的IP地址，当一个移动节点在子网之间移动时，就不能维持与远程应用之间的TCP连接。在第6章中，我们将研究移动IP,它是一种对IP基础设施的扩展,允许移动节点在网络之间移动时使用其单一永久的地址。有关DHCP的其他细节可在Droms 2002 与 dhc 2016］中找到。一个DHCP的开放源码参考实现可从因特网系统协会［ISC2016］得到。


网络层的数据平面 data plane）功能，即每台路由器的如下功能：决定到达路由器的输入链路之一的分组如何转发到该路由器的输岀链路之一。

